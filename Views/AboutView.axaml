<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="using:CheckHash.ViewModels"
             xmlns:icons="clr-namespace:Material.Icons.Avalonia;assembly=Material.Icons.Avalonia"
             x:Class="CheckHash.Views.AboutView"
             x:DataType="vm:AboutViewModel">

    <ScrollViewer Padding="0,0,20,0"
                  VerticalScrollBarVisibility="Hidden">
        <StackPanel Spacing="25">
            <TextBlock Text="{Binding Localization[Title_About]}" FontSize="28" FontWeight="Bold" Margin="0,0,0,10" />

            <!-- 1. HEADER: App Info -->
            <Border Background="{DynamicResource PaneBackgroundBrush}" CornerRadius="12" Padding="25"
                    BorderBrush="{DynamicResource GlassBorderBrush}" BorderThickness="1">
                <Grid ColumnDefinitions="Auto, *">
                    <!-- Logo -->
                    <Image Source="/Assets/logo_in_app.png" Width="80" Height="80"
                           VerticalAlignment="Top" Margin="0,0,25,0" />

                    <StackPanel Grid.Column="1" Spacing="5">
                        <TextBlock Text="{Binding AppName}" FontSize="24" FontWeight="Bold" />
                        <TextBlock Text="{Binding Version, StringFormat='Version {0}'}" FontSize="14" Opacity="0.7" />
                        <TextBlock Text="{Binding Localization[About_Desc]}" TextWrapping="Wrap" Margin="0,10,0,0" />
                        <TextBlock Text="{Binding Localization[About_License]}" FontStyle="Italic" Opacity="0.6" />
                    </StackPanel>
                </Grid>
            </Border>

            <!-- 1.5. DOCUMENTS -->
            <Border Background="{DynamicResource PaneBackgroundBrush}" CornerRadius="12" Padding="20"
                    BorderBrush="{DynamicResource GlassBorderBrush}" BorderThickness="1">
                <StackPanel Spacing="15">
                    <StackPanel Orientation="Horizontal" Spacing="10">
                        <icons:MaterialIcon Kind="FileDocument" Width="24" Height="24"
                                            Foreground="{DynamicResource SystemAccentColor}" />
                        <TextBlock Text="{Binding Localization[About_Documents]}" FontSize="18" FontWeight="SemiBold" />
                    </StackPanel>

                    <ItemsControl ItemsSource="{Binding Documents}" Margin="34,0,0,0">
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <Grid ColumnDefinitions="*, Auto" Margin="0,0,0,8">
                                    <TextBlock Text="{Binding Name}" VerticalAlignment="Center" FontWeight="SemiBold" />

                                    <Button Grid.Column="1"
                                            Command="{Binding $parent[UserControl].((vm:AboutViewModel)DataContext).OpenUrlCommand}"
                                            CommandParameter="{Binding Url}"
                                            Background="Transparent" Padding="5">
                                        <icons:MaterialIcon Kind="OpenInNew" Width="16" Height="16" Opacity="0.5" />
                                    </Button>
                                </Grid>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                </StackPanel>
            </Border>

            <!-- 2. TECHNOLOGY & AI -->
            <Border Background="{DynamicResource PaneBackgroundBrush}" CornerRadius="12" Padding="20"
                    BorderBrush="{DynamicResource GlassBorderBrush}" BorderThickness="1">
                <StackPanel Spacing="15">
                    <StackPanel Orientation="Horizontal" Spacing="10">
                        <icons:MaterialIcon Kind="CodeTags" Width="24" Height="24"
                                            Foreground="{DynamicResource SystemAccentColor}" />
                        <TextBlock Text="{Binding Localization[About_Tech]}" FontSize="18" FontWeight="SemiBold" />
                    </StackPanel>

                    <StackPanel Spacing="10" Margin="34,0,0,0">
                        <TextBlock Text="{Binding Localization[About_TechContent]}" TextWrapping="Wrap" />

                        <StackPanel Orientation="Horizontal" Spacing="10" Margin="0,10,0,0">
                            <icons:MaterialIcon Kind="Robot" Width="20" Height="20" Opacity="0.7" />
                            <TextBlock Text="{Binding Localization[About_AI]}" FontWeight="SemiBold" />
                        </StackPanel>
                        <TextBlock Text="{Binding Localization[About_AIContent]}" TextWrapping="Wrap" Opacity="0.8" />
                    </StackPanel>
                </StackPanel>
            </Border>

            <!-- 3. AUTHOR -->
            <Border Background="{DynamicResource PaneBackgroundBrush}" CornerRadius="12" Padding="20"
                    BorderBrush="{DynamicResource GlassBorderBrush}" BorderThickness="1">
                <StackPanel Spacing="15">
                    <StackPanel Orientation="Horizontal" Spacing="10">
                        <icons:MaterialIcon Kind="AccountCircle" Width="24" Height="24"
                                            Foreground="{DynamicResource SystemAccentColor}" />
                        <TextBlock Text="{Binding Localization[About_Author]}" FontSize="18" FontWeight="SemiBold" />
                    </StackPanel>

                    <StackPanel Orientation="Horizontal" Spacing="15" Margin="34,0,0,0">
                        <Button Command="{Binding OpenUrlCommand}" CommandParameter="{Binding GitHubProfile}"
                                Background="Transparent" Padding="5" CornerRadius="8"
                                ToolTip.Tip="{Binding Localization[Tip_GitHubProfile]}">
                            <StackPanel Orientation="Horizontal" Spacing="10">
                                <icons:MaterialIcon Kind="Github" Width="24" Height="24" />
                                <TextBlock Text="{Binding AuthorName}" VerticalAlignment="Center" FontWeight="Bold" />
                            </StackPanel>
                        </Button>
                    </StackPanel>
                </StackPanel>
            </Border>

            <!-- 4. THIRD-PARTY LIBRARIES -->
            <Border Background="{DynamicResource PaneBackgroundBrush}" CornerRadius="12" Padding="20"
                    BorderBrush="{DynamicResource GlassBorderBrush}" BorderThickness="1">
                <StackPanel Spacing="15">
                    <StackPanel Orientation="Horizontal" Spacing="10">
                        <icons:MaterialIcon Kind="PackageVariant" Width="24" Height="24"
                                            Foreground="{DynamicResource SystemAccentColor}" />
                        <TextBlock Text="{Binding Localization[About_ThirdParty]}" FontSize="18" FontWeight="SemiBold" />
                    </StackPanel>

                    <ItemsControl ItemsSource="{Binding Libraries}" Margin="34,0,0,0">
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <Grid ColumnDefinitions="*, Auto" Margin="0,0,0,10">
                                    <StackPanel Spacing="2">
                                        <TextBlock Text="{Binding Name}" FontWeight="SemiBold" />
                                        <TextBlock Text="{Binding License}" FontSize="11" Opacity="0.6" />
                                    </StackPanel>

                                    <Button Grid.Column="1"
                                            Command="{Binding $parent[UserControl].((vm:AboutViewModel)DataContext).OpenUrlCommand}"
                                            CommandParameter="{Binding Url}"
                                            Background="Transparent" Padding="5">
                                        <icons:MaterialIcon Kind="OpenInNew" Width="16" Height="16" Opacity="0.5" />
                                    </Button>
                                </Grid>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                </StackPanel>
            </Border>

            <!-- 5. COPYRIGHT -->
            <TextBlock Text="{Binding Copyright}" HorizontalAlignment="Center" Opacity="0.5" FontSize="12"
                       Margin="0,10,0,20" />
        </StackPanel>
    </ScrollViewer>
</UserControl>